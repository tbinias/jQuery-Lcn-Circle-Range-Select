!function(a,e){var t=a.jQuery;if("function"==typeof define&&define.amd)t?define([],e.bind(null,t)):define(["jquery"],e);else if("object"==typeof exports)module.exports=e(t?t:require("jquery"));else{if(!t)throw"Missing required jQuery dependency";e(t)}}(this,function(a){function e(a,e,n){var r=a.find("canvas"),i=r[0],l=a.outerWidth(),d=a.innerWidth(),o=l-d;r.css("left",-1*o),r.css("top",-1*o);var s=(l-o/2)/2;i.width=l+o,i.height=i.width;var u=i.getContext("2d");u.clearRect(0,0,i.width,i.height),u.beginPath(),u.arc(i.width/2,i.width/2,s,t(e)-Math.PI/2,t(n)-Math.PI/2,!1),u.lineWidth=o/2,u.strokeStyle=r.css("color"),u.stroke()}function t(a){return a*(Math.PI/180)}function n(t){var n=t.find("input"),r=i(n),l=t.find(".handle"),d=t.find(".handle1");if(!r)var o=t.find(".handle2");var s=t.outerWidth(),u=t.innerWidth(),c=(s-u)/2,f=(s-c)/2,v=parseFloat(n.attr("data-min"))||0,p=parseFloat(n.attr("data-max"))||360,g="true"===n.attr("data-readonly")||!1,h=void 0===n.attr("data-unit")?"&deg;":n.attr("data-unit"),$=p-v,m=360/$;l.each(function(e,n){var r=a(n),i=parseFloat(r.attr("data-value")),l=(i-v)*m,d=Math.round(f+f*Math.sin(l*Math.PI/180)),o=Math.round(f+f*-Math.cos(l*Math.PI/180));r.css({left:d,top:o}),r.css(g?{display:"none"}:{display:"block"}),t.find(r.attr("data-value-target")).html(r.attr("data-value")+h)}),value1=d.attr("data-value"),r?n.val(value1).trigger("change"):(value2=o.attr("data-value"),e(t,(value1-v)*m,(value2-v)*m),n.val(value1+";"+value2).trigger("change"))}function r(e){var t=i(e);if(t)var r=parseFloat(e.val()||0);else{var o=e.val()||"0;0";o=o.split(";");var r=parseFloat(o[0]),s=parseFloat(o[1])}$container=a('<div class="circle-range-select-wrapper"></div>');var u=e.attr("data-bg-image");u&&$container.css({"background-image":'url("'+u+'")',"background-size":"contain"}),e.wrap($container),$container=e.parent(),$container.append('<div class="handle handle1" data-value="'+r+'" data-value-target=".value1"></div>'),t?$container.append('<div class="values"><span class="value1"></span></div>'):($container.append('<div class="handle handle2" data-value="'+s+'" data-value-target=".value2"></div>'),$container.append('<div class="values"><span class="value1"></span> - <span class="value2"></span></div>'),$container.append('<canvas class="selected-range"></canvas>')),n($container),$container.on("mousedown touchstart",".handle",function(e){l=!0,e.preventDefault(),d=a(e.target),a(document).one("mouseup touchend",function(){l=!1,d=null})}),$container.on("configure",function(e,t){if($container=a(e.target).parent(),t){var r=$container.find("input");if(null!=t.value){var i=t.value,l=$container.find(".handle1");if(i.split(";").length>1){var d=$container.find(".handle2");l.attr("data-value",i.split(";")[0]),d.attr("data-value",i.split(";")[1])}else l.attr("data-value",i.split(";")[0])}null!=t.readonly&&r.attr("data-readonly",t.readonly),null!=t.min&&r.attr("data-min",t.min),null!=t.max&&r.attr("data-max",t.max),null!=t.unit&&r.attr("data-unit",t.unit)}n($container)}),a(window).on("resize",n.bind(null,$container))}function i(a){return void 0!==a.attr("data-single-value")&&"false"!==a.attr("data-single-value")}var l=!1,d=null;return a(document).on("mousemove touchmove",function(e){if(l){var t=a(e.target);if($draggingWrapper=t.closest(".circle-range-select-wrapper"),0===$draggingWrapper.length)return;if(d.hasClass("handle1")?$draggingHandle=$draggingWrapper.find(".handle1"):d.hasClass("handle2")&&($draggingHandle=$draggingWrapper.find(".handle2")),$draggingHandle[0]!==d[0])return;var r=d.closest(".circle-range-select-wrapper"),i=r.width()/2;if(!e.offsetX&&e.originalEvent.touches){var o=t.offset();e.offsetX=e.originalEvent.touches[0].pageX-o.left,e.offsetY=e.originalEvent.touches[0].pageY-o.top}else if("undefined"==typeof e.offsetX||"undefined"==typeof e.offsetY){var o=t.offset();e.offsetX=e.pageX-o.left,e.offsetY=e.pageY-o.top}if(t.hasClass("handle"))var s={x:e.target.offsetLeft+e.offsetX,y:e.target.offsetTop+e.offsetY};else var s={x:e.offsetX,y:e.offsetY};var u=Math.atan2(s.x-i,s.y-i),c=-u/(Math.PI/180)+180,f=r.find("input"),v=parseFloat(f.attr("data-min"))||0,p=parseFloat(f.attr("data-max"))||360,g=p-v,h=360/g,$=v+Math.round(c/h);d.attr("data-value",$),n(r)}}),a.fn.lcnCircleRangeSelect=function(){return this.each(function(){r(a(this))})},a(function(){a("input.circle-range-select[data-auto-init]").lcnCircleRangeSelect()}),a.fn.lcnCircleRangeSelect});